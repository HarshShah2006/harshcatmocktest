<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CAT Mock: Clocks & Calendars — Timed Test</title>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --accent: #27ae60;
      --danger: #e74c3c;
      --bg: #f4f6f9;
      --card-bg: #fff;
      --radius: 12px;
      --shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
    body {
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background: var(--bg);
      color: var(--primary);
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      background: var(--secondary);
      color: #fff;
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    h2 {
      margin: 0;
      font-size: 1.5rem;
    }
    .card {
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 20px;
      margin: 15px 0;
    }
    .q {
      margin: 18px 0;
    }
    .options label {
      display: block;
      margin: 8px 0;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s ease;
      background: #fafafa;
    }
    .options label:hover {
      background: #eef6fd;
      border-color: var(--secondary);
    }
    input[type=radio] {
      margin-right: 10px;
    }
    #timer {
      font-weight: bold;
      font-size: 1.1rem;
    }
    .solution {
      background: #f9fafc;
      padding: 12px;
      border-left: 4px solid #ccc;
      margin-top: 10px;
      border-radius: 6px;
      font-size: 0.95rem;
      color: #444;
    }
    .correct {
      color: var(--accent);
      font-weight: bold;
    }
    .wrong {
      color: var(--danger);
      font-weight: bold;
    }
    button {
      padding: 10px 18px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: var(--secondary);
      color: #fff;
      font-size: 1rem;
      transition: background 0.2s ease;
    }
    button:hover:not(:disabled) {
      background: #2980b9;
    }
    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    #result h3 {
      margin-top: 0;
      color: var(--secondary);
    }
    #result strong {
      color: var(--primary);
    }
    .hide {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h2>CAT-style Mock Test — Clocks & Calendars</h2>
    <div>Time left: <span id="timer">120:00</span></div>
  </header>

  <div class="card">
    <strong>Instructions</strong>
    <ul>
      <li>Total questions: <strong>20</strong>. Question type: Multiple choice (4 options).</li>
      <li>Marking: <strong>+3</strong> for correct, <strong>-1</strong> for incorrect, <strong>0</strong> for unattempted.</li>
      <li>Duration: <strong>120 minutes</strong>. The test will <strong>auto-submit</strong> when time runs out.</li>
      <li>When you submit (or time ends) you'll see your score, which questions were correct/wrong, and detailed solutions.</li>
    </ul>
    <div style="margin-top:12px">
      <button id="startBtn">Start Test</button>
      <button id="submitBtn" disabled>Submit Now</button>
    </div>
  </div>

  <form id="testForm" class="hide">
    <div id="questions"></div>
    <div style="margin:20px 0">
      <button type="button" id="submitBtn2">Submit Test</button>
    </div>
  </form>

  <div id="result" class="card hide"></div>

<script>
// Questions data (same as before)
const questions =[
{q:"1. A man walks 5 km north, then 3 km east, then 2 km south. How far is he from the starting point?", opts:["4 km","5 km","6 km","3 km"], a:0, sol:"Step 1: Net north-south = 5 − 2 = 3 km north. Step 2: Net east-west = 3 km east. Step 3: Displacement = √(3² + 3²) = √18 ≈ 4.24 km. Nearest option = 4 km."},
{q:"2. A person walks 4 km east, then 4 km north. What is the shortest distance from the starting point?", opts:["4 km","5 km","6 km","8 km"], a:1, sol:"Step 1: Right triangle with legs 4 and 4. Step 2: Displacement = √(4² + 4²) = √32 ≈ 5.66 km. Nearest option = 5 km."},
{q:"3. A boy cycles 10 km north, 6 km west, 4 km south, and 6 km east. How far is he from the starting point?", opts:["10 km","6 km","8 km","4 km"], a:1, sol:"Step 1: East-west: 6 west and 6 east cancel → 0. Step 2: North-south: 10 − 4 = 6 km north. Step 3: Displacement = 6 km."},
{q:"4. A man is facing south. He turns 90° anticlockwise, then 180° clockwise, then 90° anticlockwise. Which direction is he facing now?", opts:["North","South","East","West"], a:1, sol:"Start: South. Turn 90° left → East. Turn 180° right → West. Turn 90° left → South. Final: South."},
{q:"5. A woman walks 7 km north, then turns right and walks 3 km, then turns right again and walks 7 km. How far is she from the starting point?", opts:["3 km","7 km","10 km","5 km"], a:0, sol:"Path: Up 7 → Right 3 → Down 7 (back to start’s latitude). She is 3 km to the east of start. Distance = 3 km."},
{q:"6. A man walks 5 km east and 12 km north. What is the shortest distance from the starting point?", opts:["12 km","13 km","14 km","15 km"], a:1, sol:"Right triangle: legs 5 and 12. Displacement = √(5² + 12²) = √169 = 13 km."},
{q:"7. A person moves 6 km north, 8 km west, 6 km south. How far is he from the starting point?", opts:["10 km","8 km","12 km","6 km"], a:1, sol:"North-south cancel: 6 − 6 = 0. Net = 8 km west. Displacement = 8 km."},
{q:"8. A girl is facing north. She turns left, then right, then left, then right. Which direction is she facing?", opts:["North","South","East","West"], a:0, sol:"North → Left = West → Right = North → Left = West → Right = North. Final: North."},
{q:"9. A man walks 4 km north, 4 km east, and 4 km south. How far is he from starting point?", opts:["2 km","4 km","6 km","8 km"], a:1, sol:"North-south: 4 − 4 = 0. Net east = 4 km. Displacement = 4 km."},
{q:"10. A person walks 10 km north, 6 km east, 4 km south. How far and in which direction is he from the starting point?", opts:["10 km East","8 km North-East","8 km North","6 km North-East"], a:1, sol:"Net north-south: 10 − 4 = 6 km north. Net east-west: 6 km east. Displacement = √(6² + 6²) ≈ 8.49 km; direction is NE. Nearest option: 8 km North-East."},
{q:"11. A boy walks 8 km south, then 15 km east, then 8 km north. Find the shortest distance from the starting point.", opts:["15 km","17 km","10 km","20 km"], a:0, sol:"South then equal north cancels. Net = 15 km east. Displacement = 15 km."},
{q:"12. A man facing east turns 45° clockwise, then 270° anticlockwise. Which direction is he facing?", opts:["North","West","South","South-East"], a:1, sol:"East → 45° clockwise = South-East. From SE, 270° anticlockwise is same as 90° clockwise → West. Final: West."},
{q:"13. A man moves 5 km west, 10 km north, 5 km east. How far is he from starting point?", opts:["5 km","10 km","15 km","20 km"], a:1, sol:"West-east cancel: 5 − 5 = 0. Net = 10 km north. Displacement = 10 km."},
{q:"14. A man is facing north. He turns right, then again right, then left, then right. Which direction is he facing?", opts:["North","South","West","East"], a:1, sol:"North → Right = East → Right = South → Left = East → Right = South. Final: South."},
{q:"15. A girl goes 4 km north, then 3 km east, then 5 km south. How far is she from starting point?", opts:["2 km","3 km","4 km","5 km"], a:1, sol:"Net north-south: 4 − 5 = 1 km south. Net east-west: 3 km east. Displacement = √(1² + 3²) = √10 ≈ 3.16 km → 3 km."},
{q:"16. A person moves 3 km east, then 4 km north, then 12 km west. How far is he from starting point?", opts:["13 km","12 km","10 km","15 km"], a:2, sol:"East-west: 3 − 12 = 9 km west. North-south: 4 km north. Displacement = √(9² + 4²) = √97 ≈ 9.85 km → 10 km."},
{q:"17. A man goes 5 km south, 5 km west, and 5 km north. How far is he from starting point?", opts:["5 km","10 km","7 km","6 km"], a:0, sol:"South-north cancel: 5 − 5 = 0. Net = 5 km west. Displacement = 5 km."},
{q:"18. A person facing north turns 90° right, then 45° left, then 90° right. Which direction is he facing?", opts:["South-East","East","South-West","West"], a:0, sol:"North → 90° right = East → 45° left = North-East → 90° right = South-East. Final: South-East."},
{q:"19. A man walks 7 km north, then turns left and walks 24 km. What is the shortest distance from the starting point?", opts:["25 km","24 km","20 km","30 km"], a:0, sol:"Right triangle with legs 7 and 24. Displacement = √(7² + 24²) = √625 = 25 km."},
{q:"20. A person walks 12 km west, then 5 km south, then 12 km east. How far is he from starting point?", opts:["5 km","10 km","12 km","7 km"], a:0, sol:"West-east cancel: 12 − 12 = 0. Net = 5 km south. Displacement = 5 km."}

];

const qContainer = document.getElementById('questions');

// -------------------- CHANGE ONLY THIS --------------------
let duration = 120*60; // seconds (120 minutes)
// -----------------------------------------------------------

let timerInterval=null;
const timerEl = document.getElementById('timer');
const startBtn = document.getElementById('startBtn');
const submitBtn = document.getElementById('submitBtn');
const submitBtn2 = document.getElementById('submitBtn2');
const form = document.getElementById('testForm');
const resultDiv = document.getElementById('result');

function formatTime(s){const m=Math.floor(s/60); const sec=s%60; return `${m.toString().padStart(2,'0')}:${sec.toString().padStart(2,'0')}`;}

function renderQuestions() {
  qContainer.innerHTML = "";
  questions.forEach((item,i)=>{
    const div=document.createElement('div');div.className='q card';
    div.innerHTML = `<div><strong>Q${i+1}.</strong> ${item.q}</div>
    <div class="options">${item.opts.map((o,idx)=>`<label><input type="radio" name="q${i}" value="${idx}"/> ${String.fromCharCode(65+idx)}. ${o}</label>`).join('')}</div>
    <div class="solution hide" id="sol${i}"></div>`;
    qContainer.appendChild(div);
  });
}

function startTest(){
  startBtn.disabled=true;
  submitBtn.disabled=false;
  form.classList.remove('hide');
  renderQuestions();
  startTimer();
}

function startTimer(){
  let t = duration;
  timerEl.textContent = formatTime(t);
  timerInterval = setInterval(()=>{
    t--; timerEl.textContent = formatTime(t);
    if(t<=0){ clearInterval(timerInterval); autoSubmit(); }
  },1000);
}

function autoSubmit(){
  submitBtn.disabled=true; submitBtn2.disabled=true;
  gradeTest(true);
}

function gradeTest(auto=false){
  if(timerInterval) { clearInterval(timerInterval); }
  let score=0; let attempted=0; let correctCount=0;
  const perQ=[];
  questions.forEach((item,i)=>{
    const sel = document.querySelector(`input[name=q${i}]:checked`);
    const solDiv = document.getElementById(`sol${i}`);
    solDiv.classList.remove('hide'); solDiv.innerHTML = `<strong>Solution:</strong> ${item.sol}`;
    if(sel){
      attempted++;
      const val = parseInt(sel.value,10);
      if(val===item.a){ score += 3; perQ.push({i,ok:true}); correctCount++; sel.parentElement.style.fontWeight='700'; sel.parentElement.style.color='var(--accent)'; }
      else { score -= 1; perQ.push({i,ok:false}); sel.parentElement.style.color='var(--danger)'; }
    } else { perQ.push({i,ok:null}); }
  });
  resultDiv.classList.remove('hide');
  resultDiv.innerHTML = `<h3>Result</h3>
    <p><strong>Score:</strong> ${score} / ${questions.length*3}</p>
    <p><strong>Attempted:</strong> ${attempted} &nbsp; <strong>Correct:</strong> ${correctCount} &nbsp; <strong>Wrong:</strong> ${attempted-correctCount}</p>
    <p>${auto?'<em>Auto-submitted — time expired.</em>':''}</p>
    <hr>
    <div><strong>Per-question summary</strong></div>
    ${questions.map((it,idx)=>{
      const status = perQ[idx].ok===true ? '<span class="correct">Correct</span>' : (perQ[idx].ok===false ? '<span class="wrong">Wrong</span>' : '<span>Unattempted</span>');
      const chosen = document.querySelector(`input[name=q${idx}]:checked`);
      const chosenText = chosen ? it.opts[chosen.value] : '—';
      return `<div style="margin:8px 0"><strong>Q${idx+1}</strong>: ${status} — Your answer: ${chosenText} — Correct answer: ${it.opts[it.a]}</div>`;
    }).join('')}
    <hr>
    <div><strong>Detailed solutions shown under each question above.</strong></div>
  `;
  resultDiv.scrollIntoView({behavior:'smooth'});
}

startBtn.addEventListener('click', startTest);
submitBtn2.addEventListener('click', gradeTest);
submitBtn.addEventListener('click', gradeTest);
</script>
</body>
</html>
